var bitsoCalCallback,tweenInput,tweenStart,bitsoCalVersion="2.5",bitsoCalMode="extended",anyDate=!1;function initBitsoCalendar(a,l,e,t,n,s,i){"double"!=l&&"simple"!=l||(bitsoCalMode=l),void 0!==t&&0<t.length&&(bitsoCalCallback=t);let o=document.getElementById(a);if(null==o)console.log("id "+a+" not found");else{let t;if(0==(mobile="undefined"==typeof mobile?0:mobile))(t=getParentByClass(o,"date-selector")).classList.add("relative");else{l=parseHTML("<div id='cal_con_"+a+"' class='dark-back date-selector tcoral hidden'></div>");let e=document.querySelector("#spinning_dark_back");e.parentNode.insertBefore(l,e),t=document.getElementById("cal_con_"+a)}o.readOnly=!0,o.addEventListener("click",function(e){showCalSel(e,this)}),anyDate="anyDate"==n?!(o.value=""):(oDate=new Date,1e3<e&&oDate.setTime(e),o.value=oDate.getFullYear()+"-"+String(parseInt(oDate.getMonth())+1).padStart(2,"0")+"-"+String(oDate.getDate()).padStart(2,"0"),!1),insertSchema(t,a),drawCalSel(t)}}function insertSchema(e,t){let a="",l="simple"==bitsoCalMode?"simple":"";a=a+("<div class='bitso-cal-container grid-container no-gap hidden "+l)+"' id='cal_"+t+"'>\t<span class='bitso-cal-close' onclick='closeCalSel()'>X</span>","double"==bitsoCalMode&&(a=(a+="\t<div class='flex-container flex-col centered left' onClick='dayClick(this)'>")+"\t\t<span class='left-today'>Today</span> <span class='left-day'></span> <span class='left-mon'></span>\t</div>"),a=(a=(a=(a=(a=(a+="\t<div class='right'>")+"\t\t<div class='bitso-cal-right-header arrows grid-container' style='grid-template-columns: 1fr 3fr 1fr; gap:0'>\t\t\t<span class='bitso-arrow' onclick='calSelPrev(this)'><</span>")+"\t\t\t<span class='bitso-cal-month-name'></span>\t\t\t<span class='bitso-cal-month-num' hidden></span>")+"\t\t\t<span class='bitso-arrow' onclick='calSelNext(this)'>></span>\t\t</div>")+"\t\t<div class='bitso-cal-right-bottom'>\t\t\t<div class='bitso-cal-dow-list'></div>")+"\t\t\t<div class='bitso-cal-day-list'> </div>\t\t</div>",anyDate&&(a+="\t\t<span id='calsel_anyDate_"+t+"' class='curr-month cal-sel-day' onClick='dayClick(this)'>Any Date</span>");t=parseHTML(a=a+"\t</div>"+"</div>");e.appendChild(t);let n=new Date,s=(n.setYear(2021),n.setMonth(8),"");for(let e=1;e<=21&&(n.setDate(e),0!=s.length&&(s+="<span>"+n.toLocaleString("default",{weekday:"long"}).charAt(0)+"</span>"),0==n.getDay()&&(s+="<span>"+n.toLocaleString("default",{weekday:"long"}).charAt(0)+"</span>"),6!=n.getDay()||0==s.length);e++);e.querySelector(".bitso-cal-dow-list").innerHTML=s}function drawCalSel(e,t,a){let l=new Date,n=new Date,s="",i="",o=e.querySelector(".bitso-cal-month-name"),d=e.querySelector(".bitso-cal-month-num"),c=e.querySelector(".bitso-cal-day-list"),r=(isNaN(t)&&(t=l.getFullYear()),isNaN(a)&&(a=l.getMonth()),new Date(t,a,1)),y=new Date(t,a+1,0);var u=r.getDay(),p=y.getDay(),g=r.toLocaleString("default",{month:"long"});let h=new Date;"undefined"!=typeof todayG&&h.setTime(todayG.getTime());var m=h.toLocaleString("default",{month:"long"}),C=(i="calsel_"+t+"_"+(parseInt(h.getMonth())+1)+"_"+h.getDate(),"double"==bitsoCalMode&&(e.querySelector(".left-day").innerText=l.getDate(),e.querySelector(".left-mon").innerText=m,e.querySelector(".left").id=i),o.innerText=g+" "+r.getFullYear(),d.innerText=a+"_"+t,a+1),k=(r.getDate(),y.getDate()),f=new Date(t,a,0).getDate();n=new Date;for(let e=f-u+1;e<=f;e++)s+="<span class='last-month cal-sel-day'>"+e+"</span>";(n=new Date).setMonth(a);for(let e=1;e<=k;e++)n=new Date(n.setDate(e)),i="calsel_"+t+"_"+C+"_"+n.getDate(),s+="<span id='"+i+"' class='curr-month cal-sel-day' onClick='dayClick(this)'>"+n.getDate()+"</span>";for(let e=1;e<7-p;e++)(n=new Date).setDate(e),n.setMonth(a+1),s+="<span class='next-month cal-sel-day'>"+n.getDate()+"</span>";for(m=parseHTML(s);c.firstChild;)c.removeChild(c.lastChild);c.appendChild(m)}function calSelPrev(e){let t=getParentByClass(e,"bitso-cal-container");var e=t.querySelector(".bitso-cal-month-num").innerText.split("_"),a=parseInt(e[0])-1;drawCalSel(t,e[1],a)}function calSelNext(e){let t=getParentByClass(e,"bitso-cal-container");var e=t.querySelector(".bitso-cal-month-num").innerText.split("_"),a=parseInt(e[0])+1;drawCalSel(t,e[1],a)}function dayClick(e){e.classList.add("clicked");var t=e.id.split("_");let a=getParentByClass(e,"bitso-cal-container").id;var l=a.substring(a.indexOf("_")+1);let n=document.getElementById(l),s=new Date,i=("anyDate"==t[1]?n.value="":(s.setYear(t[1]),s.setMonth(t[2]-1),s.setDate(t[3]),n.value=s.getFullYear()+"-"+String(parseInt(s.getMonth())+1).padStart(2,"0")+"-"+String(parseInt(s.getDate())).padStart(2,"0")),0);1==mobile&&(i=300),setTimeout(function(){"function"==typeof bitsoCalCallback&&bitsoCalCallback(s),e.classList.remove("clicked"),closeCalSel()},i)}function showCalSel(e,t){e.stopPropagation();let a=document.getElementById("cal_"+t.id),l=getParentByClass(a,"date-selector");a.classList.toggle("hidden"),1==mobile?l.classList.toggle("hidden"):a.scrollIntoView(),document.addEventListener("mouseup",bitsoCalSelEvent)}function closeCalSel(){document.querySelectorAll(".bitso-cal-container").forEach(function(e){e.classList.contains("hidden")||(e.classList.add("hidden"),1==mobile&&getParentByClass(e,"date-selector").classList.toggle("hidden"))}),document.removeEventListener("mouseup",bitsoCalSelEvent)}function bitsoCalSelEvent(a){document.querySelectorAll(".date-selector").forEach(function(e){let t=e.querySelector(".bitso-cal-container");null==t||t.classList.contains("hidden")||t.contains(a.target)||closeCalSel()})}const deskyOpts={};function initDeskyCalendarAll(){0==Object.keys(deskyOpts).length?console.log("Init deskyOpts Object beforer using this function"):Array.from(Object.keys(deskyOpts)).forEach(function(t){let e=document.getElementById(t);let a=parseHTML("<div id='deskycal_container_"+t+"' class='deskycal'></div>").firstChild,l=e.cloneNode(!0),n=e.parentNode;a.appendChild(l),n.replaceChild(a,e),l.readOnly=!0,l.addEventListener("click",function(e){showCalSel(e,this)});let s,i;var o=deskyOpts[t].in_date;if(deskyOpts[t].any_date)l.value="Select";else{let e=new Date;1e3<o&&(e.setTime(o),s=e.getUTCMonth(),i=e.getUTCFullYear(),deskyOpts[t].in_date=e.getTime()),l.value=e.getUTCFullYear()+"-"+String(parseInt(e.getUTCMonth())+1).padStart(2,"0")+"-"+String(e.getUTCDate()).padStart(2,"0")}let d=new Date;o=deskyOpts[t].disabled_before;1e3<o&&(d.setTime(o),deskyOpts[t].disabled_before=d.getTime()),insertSchema(a,t),drawCalSel(a,t,i,s)})}function initDeskyCalendar(i,o="double",d=null,c=!1,r=null,y=null,u=null,p=!1,g=null){let h=document.getElementById(i);if(null==h)console.log("[deskyCal] input id "+i+" not found");else{["double","single"].includes(o=null==o?"double":o)||console.log('[deskyCal] "mode" not valid; "single" or "double" are valid'),d<0&&console.log("[deskyCal] timestamp can't be negative"),deskyOpts[i]={mode:o,in_date:d,any_date:c,next_input:r,disabled_before:y,disabled_after:u,callback:g,scroll:p};let e=parseHTML("<div id='deskycal_container_"+i+"' class='deskycal'></div>").firstChild,t=h.cloneNode(!0),a=h.parentNode;e.appendChild(t),a.replaceChild(e,h),t.readOnly=!0,t.addEventListener("click",function(e){showCalSel(e,this)});let l,n;if(c)t.value="";else{let e=new Date;1e3<d&&(e.setTime(d),l=e.getUTCMonth(),n=e.getUTCFullYear(),deskyOpts[i].in_date=e.getTime()),t.value=e.getUTCFullYear()+"-"+String(parseInt(e.getUTCMonth())+1).padStart(2,"0")+"-"+String(e.getUTCDate()).padStart(2,"0")}let s=new Date;1e3<y&&(s.setTime(y),deskyOpts[i].disabled_before=s.getTime()),insertSchema(e,i),drawCalSel(e,i,n,l)}}function insertSchema(e,t){let a="",l="";"single"==deskyOpts[t].mode&&(l="single"),a=(a+="<div class='desky-dark-container desky-cal-hidden'>")+"\t<div class='desky-cal-container  "+l+"' id='deskycal_"+t+"'>\t\t<span class='desky-cal-close' onclick='closeCalSel()'>X</span>","double"==deskyOpts[t].mode&&(a=(a+="\t\t<div class='left' onClick='dayClick(this)'>")+"\t\t\t<span class='left-today'>Today</span> <span class='left-day'></span> <span class='left-mon'></span>\t\t</div>"),a=(a=(a=(a=(a=(a+="\t\t<div class='right'>")+"\t\t\t<div class='desky-cal-right-header arrows'>\t\t\t\t<span class='desky-arrow' onclick='calSelPrev(this)'><</span>")+"\t\t\t\t<span class='desky-cal-month-name'></span>\t\t\t\t<span class='desky-cal-month-num desky-cal-hidden' ></span>")+"\t\t\t\t<span class='desky-arrow' onclick='calSelNext(this)'>></span>\t\t\t</div>")+"\t\t\t<div class='desky-cal-right-bottom'>\t\t\t\t<div class='desky-cal-dow-list'></div>")+"\t\t\t\t<div class='desky-cal-day-list'> </div>\t\t\t</div>",deskyOpts[t].any_date&&(a+="\t\t\t<span data-day='calsel_anyDate_"+t+"' class='curr-month cal-sel-day' onClick='dayClick(this)'>Any Date</span>");t=parseHTML(a=(a+="\t\t</div>")+"\t</div>"+"</div>");e.appendChild(t);let n=new Date,s=(n.setYear(2021),n.setMonth(8),"");for(let e=1;e<=21&&(n.setDate(e),0!=s.length&&(s+="<span>"+n.toLocaleString("default",{weekday:"long"}).charAt(0)+"</span>"),0==n.getDay()&&(s+="<span>"+n.toLocaleString("default",{weekday:"long"}).charAt(0)+"</span>"),6!=n.getDay()||0==s.length);e++);e.querySelector(".desky-cal-dow-list").innerHTML=s}function drawCalSel(e,a,l,t){let n=new Date,s=new Date,i="";var o;let d=e.querySelector(".desky-cal-month-name"),c=e.querySelector(".desky-cal-month-num"),r=e.querySelector(".desky-cal-day-list"),y=(isNaN(l)&&(l=n.getUTCFullYear()),isNaN(t)&&(t=n.getUTCMonth()),new Date(l,t,1)),u=new Date(l,t+1,0);var p=y.getDay(),g=u.getDay(),h=y.toLocaleString("default",{month:"long"});let m=new Date;var C=m.toLocaleString("default",{month:"long"}),k="calsel_"+l+"_"+(parseInt(m.getUTCMonth())+1)+"_"+m.getUTCDate(),f=("double"==deskyOpts[a].mode&&(e.querySelector(".left-day").innerText=n.getUTCDate(),e.querySelector(".left-mon").innerText=C,e.querySelector(".left").dataset.day=k),d.innerText=h+" "+y.getUTCFullYear(),c.innerText=t+"_"+l,t+1),S=(y.getUTCDate(),u.getUTCDate()),v=new Date(l,t,0).getUTCDate();s=new Date;for(let e=v-p+1;e<=v;e++)i+="<span class='last-month cal-sel-day'>"+e+"</span>";(s=new Date).setMonth(t);for(let t=1;t<=S;t++){let e=k==(o="calsel_"+l+"_"+f+"_"+(s=new Date(s.setDate(t))).getUTCDate())?"today":"";s.getTime()<deskyOpts[a].disabled_before&&(e="disabled"),s.getTime()>deskyOpts[a].disabled_after&&null!=deskyOpts[a].disabled_after&&(e="disabled"),i+="<span data-day='"+o+"' class='curr-month cal-sel-day "+e+"' onClick='dayClick(this)'>"+s.getUTCDate()+"</span>"}for(let e=1;e<7-g;e++)(s=new Date).setDate(e),s.setMonth(t+1),i+="<span class='next-month cal-sel-day'>"+s.getUTCDate()+"</span>";for(C=parseHTML(i);r.firstChild;)r.removeChild(r.lastChild);r.appendChild(C)}function calSelPrev(e){let t=getParentByClass(e,"desky-cal-container");var e=t.querySelector(".desky-cal-month-num").innerText.split("_"),a=parseInt(e[0])-1;drawCalSel(t,t.id.split("_").slice(1).join("_"),e[1],a)}function calSelNext(e){let t=getParentByClass(e,"desky-cal-container");var e=t.querySelector(".desky-cal-month-num").innerText.split("_"),a=parseInt(e[0])+1;drawCalSel(t,t.id.split("_").slice(1).join("_"),e[1],a)}function dayClick(l){if(!l.classList.contains("disabled")){l.classList.add("clicked");var n=l.dataset.day.split("_");let e=getParentByClass(l,"desky-cal-container").id;var s=e.substring(e.indexOf("_")+1);let t=document.getElementById(s),a=new Date;if("anyDate"==n[1]?t.value="":(a.setUTCFullYear(n[1]),a.setUTCMonth(n[2]-1),a.setUTCDate(n[3]),t.value=a.getUTCFullYear()+"-"+String(parseInt(a.getUTCMonth())+1).padStart(2,"0")+"-"+String(parseInt(a.getUTCDate())).padStart(2,"0")),"function"==typeof deskyOpts[s].callback&&(console.log("call back function"),deskyOpts[s].callback(a)),null!=deskyOpts[s].next_input&&"anyDate"!=n[1]){var s=deskyOpts[s].next_input,i=document.getElementById("deskycal_container_"+s);let e=document.getElementById(s);deskyOpts[s].disabled_before=a.getTime(),e.value=a.getUTCFullYear()+"-"+String(parseInt(a.getUTCMonth())+1).padStart(2,"0")+"-"+String(parseInt(a.getUTCDate())).padStart(2,"0"),drawCalSel(i,s,n[1],n[2]-1)}setTimeout(function(){l.classList.remove("clicked"),closeCalSel()},300)}}function showCalSel(e,t){e.stopPropagation();let a=t.parentNode,l=a.querySelector(".desky-dark-container"),n=(l.classList.toggle("desky-cal-hidden"),deskyOpts[t.id].scroll&&(console.log("Scroll into view"),l.querySelector(".desky-cal-container").scrollIntoView({behavior:"smooth",block:"center"})),a.querySelector(".desky-cal-container"));n.getBoundingClientRect().bottom;e=n.getBoundingClientRect().right;window.innerHeight;window.innerWidth<e&&(n.style.right="2px"),document.addEventListener("mouseup",deskyCalSelEvent)}function closeCalSel(){document.querySelectorAll(".desky-dark-container").forEach(function(e){e.classList.contains("desky-cal-hidden")||e.classList.add("desky-cal-hidden")}),document.removeEventListener("mouseup",deskyCalSelEvent)}function deskyCalSelEvent(a){document.querySelectorAll(".deskycal").forEach(function(e){let t=e.querySelector(".desky-dark-container");null==t||t.classList.contains("desky-cal-hidden")||t.contains(a.target)||closeCalSel()})}function getParentByClass(e,t,a=10){let l=0;for(;!e.classList.contains(t);)if(e=e.parentElement,++l>a)return!1;return e}function parseHTML(e){var t=document.createElement("template");return t.innerHTML=e,t.content}
